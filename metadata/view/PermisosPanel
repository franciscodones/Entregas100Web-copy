{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "closable": true,
        "container|align": "stretch",
        "designer|userAlias": "permisospanel",
        "designer|userClassName": "PermisosPanel",
        "glyph": "f023@FontAwesome",
        "id": "permisosPanel",
        "layout": "hbox",
        "title": "Permisos"
    },
    "configAlternates": {
        "closable": "boolean",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "glyph": "auto",
        "id": "string",
        "title": "string",
        "viewModel": "object",
        "container|align": "string",
        "layout": "string"
    },
    "name": "PerfilesPagoPanel1",
    "designerId": "6ff83ac1-9ec0-484e-ba57-f2a7fc44a3fd",
    "viewControllerInstanceId": "12ffe505-7dbd-4afe-ad83-241eeb8434f0",
    "viewModelInstanceId": "8969c5da-58fb-430b-8ab7-efc66c55f2a8",
    "cn": [
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|uiInterfaceName": "footer",
                "dock": "top",
                "ui": "footer"
            },
            "configAlternates": {
                "designer|uiInterfaceName": "string",
                "dock": "string",
                "ui": "string"
            },
            "name": "MyToolbar",
            "designerId": "37f22367-63ec-4f55-af20-f0f699fbdf6e",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "default-small",
                        "glyph": "f021@FontAwesome",
                        "itemId": "btnRefrescar",
                        "layout|flex": null,
                        "text": "Refrescar",
                        "ui": "default-small"
                    },
                    "configAlternates": {
                        "glyph": "auto",
                        "layout|flex": "number",
                        "text": "string",
                        "itemId": "string",
                        "designer|uiInterfaceName": "string",
                        "ui": "string"
                    },
                    "name": "MyButton1",
                    "designerId": "09753694-e33e-43a4-8ffe-8fc0cdfa4f56",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnRefrescarClick",
                                "implHandler": [
                                    "var me = this;",
                                    "",
                                    "me.getStore(\"PerfilesPagoLocalStore\").load();",
                                    "me.getStore(\"CombinacionesFormaPerfilLocalStore\").load();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onBtnRefrescarClick",
                            "designerId": "a9f56416-3ab2-4f52-8b41-cde6ba80a097"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.tab.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|uiInterfaceName": "default-framed",
                "frame": true,
                "itemId": "gridsTabPanel",
                "layout|flex": 1
            },
            "configAlternates": {
                "designer|uiInterfaceName": "string",
                "frame": "boolean",
                "layout|flex": "number",
                "itemId": "string"
            },
            "name": "MyTabPanel2",
            "designerId": "881bd256-fb1a-48ab-9022-8c39e8943a70",
            "cn": [
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "columnLines": true,
                        "designer|uiInterfaceName": "default",
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "itemId": "tiposSesionGrid",
                        "scrollable": true,
                        "showMenuHint": true,
                        "showMenuTriggers": true,
                        "store": [
                            "{TiposSesionLocalStore}"
                        ],
                        "title": "Permisos por tipo",
                        "width": 500
                    },
                    "configAlternates": {
                        "columnLines": "boolean",
                        "enableColumnHide": "boolean",
                        "enableColumnMove": "boolean",
                        "itemId": "string",
                        "scrollable": "auto",
                        "store": "binding",
                        "autoLoad": "boolean",
                        "layout|flex": "number",
                        "showMenuTriggers": "boolean",
                        "showMenuHint": "boolean",
                        "designer|uiInterfaceName": "string",
                        "frame": "boolean",
                        "width": "auto",
                        "title": "string"
                    },
                    "name": "MyGridPanel",
                    "designerId": "3d59a766-a6ac-4388-b11e-f03a9654348e",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "showMenuTriggers",
                            "type": "string"
                        },
                        {
                            "group": "(Custom Properties)",
                            "name": "showMenuHint",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "id",
                                "format": "0,000",
                                "text": "Id",
                                "width": 60
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "format": "string"
                            },
                            "name": "MyNumberColumn2",
                            "designerId": "959ca3f6-0f0a-4fb3-a8a8-3af646abc153"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "tipo_sesion",
                                "text": "Tipo",
                                "width": 200
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "flex": "number",
                                "width": "auto"
                            },
                            "name": "MyColumn2",
                            "designerId": "24d8b38c-8e76-4a30-a717-9a1748d5ab39",
                            "cn": [
                                {
                                    "type": "Ext.grid.filters.filter.String",
                                    "reference": {
                                        "name": "filter",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyStringFilter7",
                                    "designerId": "6a69fb0b-cfde-4a63-aee4-9ddd7e0e3ce9"
                                }
                            ]
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "No se encontraron resultados"
                            },
                            "configAlternates": {
                                "emptyText": "string"
                            },
                            "name": "MyTable",
                            "designerId": "e0c6571d-f0d5-4828-911f-4e2c19aba3d8"
                        },
                        {
                            "type": "Ext.grid.filters.Filters",
                            "reference": {
                                "name": "plugins",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MyGridFiltersPlugin3",
                            "designerId": "93f12ae8-60f7-406d-abbc-7f854723f555"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTiposSesionGridSelect",
                                "implHandler": [
                                    "var me = this,",
                                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\"),",
                                    "    permisosGrid = me.view.down(\"#permisosGrid\"),",
                                    "    permisosActuales;",
                                    "",
                                    "// obtiene todos los permisos del usuario",
                                    "permisosActuales = permisosUsuarioLocalStore.query(\"tipo_usuario_id\", record.get(\"id\"));",
                                    "permisosActuales = permisosActuales.getValues(\"permiso_id\", \"data\");",
                                    "",
                                    "// modifica permisosLocalStore para coordinarlo con los permisosActuales",
                                    "permisosLocalStore.removeFilter(\"sinSeleccion\");",
                                    "permisosLocalStore.each(function(rec) {",
                                    "    rec.set(",
                                    "        \"es_permitido\",",
                                    "        Ext.Array.contains(permisosActuales, rec.get(\"id\"))",
                                    "    );",
                                    "});",
                                    "permisosLocalStore.commitChanges();"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onTiposSesionGridSelect",
                            "designerId": "049280be-f428-4f82-9a02-760cd84c0fee"
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig",
                            "designerId": "3c2bd3c1-5660-4ac7-aa4f-9f800bdf14d5"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTiposSesionGridBeforeSelect",
                                "implHandler": [
                                    "var me = this,",
                                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\");",
                                    "",
                                    "if (permisosLocalStore.isDirty()) {",
                                    "    Ext.Msg.show({",
                                    "        title: \"Mensaje del sistema\",",
                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                    "        buttons: Ext.Msg.YESNO,",
                                    "        icon: Ext.Msg.WARNING,",
                                    "        fn: function(result) {",
                                    "            if (result == \"yes\") {",
                                    "                permisosLocalStore.rejectChanges();",
                                    "                permisosUsuarioLocalStore.rejectChanges();",
                                    "                rowmodel.select(record);",
                                    "            }",
                                    "        }",
                                    "    });",
                                    "    return false;",
                                    "}"
                                ],
                                "name": "beforeselect",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onTiposSesionGridBeforeSelect",
                            "designerId": "470dad76-7ce2-4bf8-9be2-5fb59588c0c5"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "columnLines": true,
                        "designer|uiInterfaceName": "default",
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "itemId": "usuariosGrid",
                        "scrollable": true,
                        "showMenuHint": true,
                        "showMenuTriggers": true,
                        "store": [
                            "{UsuariosLocalStore}"
                        ],
                        "title": "Permisos personalizados",
                        "width": 500
                    },
                    "configAlternates": {
                        "columnLines": "boolean",
                        "enableColumnHide": "boolean",
                        "enableColumnMove": "boolean",
                        "itemId": "string",
                        "scrollable": "auto",
                        "store": "binding",
                        "autoLoad": "boolean",
                        "layout|flex": "number",
                        "showMenuTriggers": "boolean",
                        "showMenuHint": "boolean",
                        "designer|uiInterfaceName": "string",
                        "frame": "boolean",
                        "width": "auto",
                        "title": "string"
                    },
                    "name": "MyGridPanel2",
                    "designerId": "877f0849-ca53-4b76-a737-4b55acb8062f",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "showMenuTriggers",
                            "type": "string"
                        },
                        {
                            "group": "(Custom Properties)",
                            "name": "showMenuHint",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "id",
                                "format": "0,000",
                                "text": "Id",
                                "width": 60
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "format": "string"
                            },
                            "name": "MyNumberColumn2",
                            "designerId": "e049364e-9445-4001-9858-63c723c53c75"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "nombre",
                                "text": "Nombre",
                                "width": 200
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "flex": "number",
                                "width": "auto"
                            },
                            "name": "MyColumn2",
                            "designerId": "fecda132-95fa-41b8-ac63-3743cfbcfe05",
                            "cn": [
                                {
                                    "type": "Ext.grid.filters.filter.String",
                                    "reference": {
                                        "name": "filter",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyStringFilter7",
                                    "designerId": "07b8076b-9203-4cd9-b890-624f5ad7a227"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "usuario",
                                "text": "Usuario",
                                "width": 120
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn3",
                            "designerId": "463223a3-c0b0-4f13-ab89-1ab3665bf462"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "tipo_sesion",
                                "text": "Tipo",
                                "width": 150
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn1",
                            "designerId": "14c874f4-f78c-4249-bfc4-23eb34f99d39",
                            "cn": [
                                {
                                    "type": "Ext.grid.filters.filter.List",
                                    "reference": {
                                        "name": "filter",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyListFilter",
                                    "designerId": "cca72aab-5dcb-46c5-b3c9-3a3dd8276e81"
                                }
                            ]
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "No se encontraron resultados"
                            },
                            "configAlternates": {
                                "emptyText": "string"
                            },
                            "name": "MyTable",
                            "designerId": "9cb51aa2-537d-4a2a-ae5d-21efe2225a52"
                        },
                        {
                            "type": "Ext.grid.filters.Filters",
                            "reference": {
                                "name": "plugins",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MyGridFiltersPlugin3",
                            "designerId": "5e84a149-1da9-4995-96d7-4863069c34c2"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onUsuariosGridSelect",
                                "implHandler": [
                                    "var me = this,",
                                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\"),",
                                    "    permisosGrid = me.view.down(\"#permisosGrid\"),",
                                    "    permisosActuales;",
                                    "",
                                    "// obtiene todos los permisos del tipo de sesion",
                                    "permisosActuales = permisosUsuarioLocalStore.query(\"usuario_id\", record.get(\"id\"));",
                                    "permisosActuales = permisosActuales.getValues(\"permiso_id\", \"data\");",
                                    "",
                                    "// modifica permisosLocalStore para coordinarlo con los permisosActuales",
                                    "permisosLocalStore.removeFilter(\"sinSeleccion\");",
                                    "permisosLocalStore.each(function(rec) {",
                                    "    rec.set(",
                                    "        \"es_permitido\",",
                                    "        Ext.Array.contains(permisosActuales, rec.get(\"id\"))",
                                    "    );",
                                    "});",
                                    "permisosLocalStore.commitChanges();"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onUsuariosGridSelect",
                            "designerId": "5c7c9224-6031-4928-b663-a4d29a5f0e55"
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig",
                            "designerId": "81f6b337-bb36-4be3-8e29-84879af1a0eb"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onUsuariosGridBeforeSelect",
                                "implHandler": [
                                    "var me = this,",
                                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\");",
                                    "",
                                    "if (permisosLocalStore.isDirty()) {",
                                    "    Ext.Msg.show({",
                                    "        title: \"Mensaje del sistema\",",
                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                    "        buttons: Ext.Msg.YESNO,",
                                    "        icon: Ext.Msg.WARNING,",
                                    "        fn: function(result) {",
                                    "            if (result == \"yes\") {",
                                    "                permisosLocalStore.rejectChanges();",
                                    "                permisosUsuarioLocalStore.rejectChanges();",
                                    "                rowmodel.select(record);",
                                    "            }",
                                    "        }",
                                    "    });",
                                    "    return false;",
                                    "}"
                                ],
                                "name": "beforeselect",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onUsuariosGridBeforeSelect",
                            "designerId": "77a4b5ce-9bfa-4877-835a-f313c4007654"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.tab.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|uiInterfaceName": "default-framed",
                "frame": true,
                "layout|flex": 1
            },
            "configAlternates": {
                "activeTab": "auto",
                "designer|uiInterfaceName": "string",
                "frame": "boolean",
                "layout|flex": "number"
            },
            "name": "MyTabPanel",
            "designerId": "195d3153-5370-4870-b2f5-05d171cb716b",
            "cn": [
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "itemId": "permisosGrid",
                        "scrollable": true,
                        "store": [
                            "{PermisosLocalStore}"
                        ],
                        "title": "Permisos"
                    },
                    "configAlternates": {
                        "store": "binding",
                        "autoLoad": "boolean",
                        "enableColumnHide": "boolean",
                        "enableColumnMove": "boolean",
                        "scrollable": "auto",
                        "itemId": "string",
                        "title": "string"
                    },
                    "name": "MyGridPanel1",
                    "designerId": "eef00776-4f74-44ae-a3aa-a8d21f6c29ce",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|uiInterfaceName": "footer",
                                "dock": "top",
                                "ui": "footer"
                            },
                            "configAlternates": {
                                "designer|uiInterfaceName": "string",
                                "dock": "string",
                                "ui": "string"
                            },
                            "name": "MyToolbar1",
                            "designerId": "5773d39d-b7de-4c83-beaa-679318976d91",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f0e2@FontAwesome",
                                        "itemId": "btnRevertir",
                                        "layout|flex": null,
                                        "text": "Revertir",
                                        "tooltip": "Revertir cambios"
                                    },
                                    "configAlternates": {
                                        "layout|flex": "number",
                                        "text": "string",
                                        "permissionId": "number",
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "tooltip": "string"
                                    },
                                    "name": "MyButton",
                                    "designerId": "93444fe9-4a9d-433b-b7d7-06cdc6f44b85",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRevertirClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                                                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\");",
                                                    "",
                                                    "if (permisosLocalStore.isDirty()) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                                    "        buttons: Ext.Msg.YESNO,",
                                                    "        icon: Ext.Msg.WARNING,",
                                                    "        fn: function(result) {",
                                                    "            if (result == \"yes\") {",
                                                    "                permisosLocalStore.rejectChanges();",
                                                    "                permisosUsuarioLocalStore.rejectChanges();",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnRevertirClick",
                                            "designerId": "1cf11ace-d542-4807-a826-36d01257fb67"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f058@FontAwesome",
                                        "itemId": "btnGuardar",
                                        "layout|flex": null,
                                        "text": "Guardar",
                                        "tooltip": "Guardar cambios"
                                    },
                                    "configAlternates": {
                                        "permissionId": "number",
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string",
                                        "tooltip": "string"
                                    },
                                    "name": "MyButton2",
                                    "designerId": "a0818c47-4050-4ed7-b530-0f6e32be1c6b",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnGuardarClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                                                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\"),",
                                                    "    record = me.view.down(\"#gridsTabPanel\").getActiveTab().getSelection()[0],",
                                                    "    waitWindow, esPersonalizado, index;",
                                                    "",
                                                    "if (!record) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Seleccione un usuario o tipo de usuario\",",
                                                    "        buttons: Ext.Msg.OK,",
                                                    "        icon: Ext.Msg.ERRROR",
                                                    "    });",
                                                    "    return;",
                                                    "} else if (!permisosLocalStore.isDirty()) {",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "waitWindow = Ext.Msg.wait(\"Guardando cambios...\");",
                                                    "esPersonalizado = record.$className == \"Entregas100Web.model.UsuarioModel\";",
                                                    "",
                                                    "if (esPersonalizado) {",
                                                    "    permisosLocalStore.each(function(permisoRecord) {",
                                                    "        index = permisosUsuarioLocalStore.findBy(function(rec) {",
                                                    "            return rec.get(\"permiso_id\") == permisoRecord.get(\"id\") &&",
                                                    "                rec.get(\"usuario_id\") == record.get(\"id\");",
                                                    "        });",
                                                    "        if (permisoRecord.get(\"es_permitido\")) {",
                                                    "            // si es permitido agrega el permiso en caso que no exista",
                                                    "            if (index == -1) {",
                                                    "                permisosUsuarioLocalStore.add({",
                                                    "                    usuario_id: record.get(\"id\"),",
                                                    "                    permiso_id: permisoRecord.get(\"id\")",
                                                    "                });",
                                                    "            }",
                                                    "        } else {",
                                                    "            // si no es permitido elimina el permiso en caso que exista",
                                                    "            if (index != -1) {",
                                                    "                permisosUsuarioLocalStore.removeAt(index);",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "} else {",
                                                    "    permisosLocalStore.each(function(permisoRecord) {",
                                                    "        index = permisosUsuarioLocalStore.findBy(function(rec) {",
                                                    "            return rec.get(\"permiso_id\") == permisoRecord.get(\"id\") &&",
                                                    "                rec.get(\"tipo_usuario_id\") == record.get(\"id\");",
                                                    "        });",
                                                    "        if (permisoRecord.get(\"es_permitido\")) {",
                                                    "            // si es permitido agrega el permiso en caso que no exista",
                                                    "            if (index == -1) {",
                                                    "                permisosUsuarioLocalStore.add({",
                                                    "                    tipo_usuario_id: record.get(\"id\"),",
                                                    "                    permiso_id: permisoRecord.get(\"id\")",
                                                    "                });",
                                                    "            }",
                                                    "        } else {",
                                                    "            // si no es permitido elimina el permiso en caso que exista",
                                                    "            if (index != -1) {",
                                                    "                permisosUsuarioLocalStore.removeAt(index);",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "}",
                                                    "",
                                                    "permisosUsuarioLocalStore.sync({",
                                                    "    success: onSyncSuccess",
                                                    "});",
                                                    "",
                                                    "function onSyncSuccess() {",
                                                    "    permisosLocalStore.commitChanges();",
                                                    "    waitWindow.close();",
                                                    "}",
                                                    "",
                                                    "window.me = me;",
                                                    "window.permisosUsuarioLocalStore = permisosUsuarioLocalStore;"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnGuardarClick",
                                            "designerId": "53d6b38f-9b69-4481-9eb5-8e3f8801d4b9"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "id",
                                "format": "0,000",
                                "text": "Id",
                                "width": 60
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "format": "string",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyNumberColumn1",
                            "designerId": "1e18c492-1f7b-452a-a836-fc09b98b353f"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "descripcion",
                                "text": "Permiso",
                                "width": 400
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn",
                            "designerId": "c7a30f37-8291-46a7-9bfc-493ccaa89f08"
                        },
                        {
                            "type": "Ext.grid.column.Check",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "es_permitido",
                                "headerCheckbox": true,
                                "tooltip": "Permitir todo"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "falseText": "string",
                                "text": "string",
                                "trueText": "string",
                                "undefinedText": "string",
                                "headerCheckbox": "boolean",
                                "tooltip": "string"
                            },
                            "name": "MyCheck",
                            "designerId": "118bb5d9-ba10-408e-bc9a-d996aeef831d"
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "configAlternates": {
                                "markDirty": "boolean"
                            },
                            "name": "MyTable1",
                            "designerId": "617d0609-4bc9-4922-b669-f4f34022785a"
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig1",
                            "designerId": "d1088d66-5e66-4b34-906a-e93b95264767"
                        },
                        {
                            "type": "Ext.grid.feature.Grouping",
                            "reference": {
                                "name": "features",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "startCollapsed": true
                            },
                            "configAlternates": {
                                "startCollapsed": "boolean"
                            },
                            "name": "MyGroupingFeature",
                            "designerId": "a81dcf5d-2900-40bb-b195-07defebd2f1a",
                            "cn": [
                                {
                                    "type": "Ext.XTemplate",
                                    "reference": {
                                        "name": "groupHeaderTpl",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "groupHeaderTpl",
                                        "implHandler": [
                                            "{name}"
                                        ]
                                    },
                                    "configAlternates": {
                                        "designer|displayName": "string",
                                        "implHandler": "code"
                                    },
                                    "name": "groupHeaderTpl",
                                    "designerId": "3ef70ff6-864a-472b-8349-a082eb2b9bbc"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPermisosPanelAfterRender",
                "implHandler": [
                    "var me = this,",
                    "    permisosLocalStore = me.getStore(\"PermisosLocalStore\"),",
                    "    usuariosLocalStore = me.getStore(\"UsuariosLocalStore\"),",
                    "    permisosUsuarioLocalStore = me.getStore(\"PermisosUsuarioLocalStore\"),",
                    "    tiposSesionLocalStore = me.getStore(\"TiposSesionLocalStore\"),",
                    "    promesaPermisosLoad = new Ext.Deferred(),",
                    "    promesaUsuariosLoad = new Ext.Deferred(),",
                    "    promesaTiposSesionLoad = new Ext.Deferred(),",
                    "    promesaPermisosUsuarioLoad = new Ext.Deferred();",
                    "",
                    "me.view.mask(\"Cargando...\");",
                    "",
                    "// filtra el permisosLocalStore para no mostrar nada inicialmente",
                    "permisosLocalStore.addFilter([",
                    "    {",
                    "        id: \"sinSeleccion\",",
                    "        filterFn: function() {",
                    "            return false;",
                    "        }",
                    "    }",
                    "]);",
                    "",
                    "// carga los stores necesarios antes de habilitar el panel",
                    "permisosLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaPermisosLoad.resolve();",
                    "    } else {",
                    "        promesaPermisosLoad.reject();",
                    "    }",
                    "});",
                    "usuariosLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaUsuariosLoad.resolve();",
                    "    } else {",
                    "        promesaUsuariosLoad.reject();",
                    "    }",
                    "});",
                    "tiposSesionLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaTiposSesionLoad.resolve();",
                    "    } else {",
                    "        promesaTiposSesionLoad.reject();",
                    "    }",
                    "});",
                    "permisosUsuarioLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaPermisosUsuarioLoad.resolve();",
                    "    } else {",
                    "        promesaPermisosUsuarioLoad.reject();",
                    "    }",
                    "});",
                    "",
                    "// al terminar de cargar los stores habilita el panel",
                    "Ext.Deferred.all([",
                    "    promesaPermisosLoad,",
                    "    promesaUsuariosLoad,",
                    "    promesaTiposSesionLoad,",
                    "    promesaPermisosUsuarioLoad",
                    "]).then(onStoresLoad, onStoresLoad);",
                    "",
                    "function onStoresLoad() {",
                    "    me.view.unmask();",
                    "}"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onPermisosPanelAfterRender",
            "designerId": "39ea1448-cb1b-428e-b35a-043c85c41ad4"
        }
    ]
}